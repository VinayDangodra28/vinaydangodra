import React, { useEffect, useState, useContext } from 'react';
import { ThemeContext } from './ToggleButton'; // Adjust the path as necessary

const Logo = ({ cursorPosition = { x: 0, y: 0 } }) => {
    const { isDarkMode } = useContext(ThemeContext);
    
    // Calculate metallic gradient based on cursor position and theme
    const getMetallicGradient = () => {
        const { x, y } = cursorPosition;
        
        if (isDarkMode) {
            // Dark mode: Silver/chrome metallic effect
            const highlight = Math.max(0, Math.min(100, 85 + x * 0.5));
            const shadow = Math.max(0, Math.min(100, 25 - y * 0.3));
            return {
                color1: `hsl(0, 0%, ${highlight}%)`,
                color2: `hsl(210, 5%, ${65 + x * 0.2}%)`,
                color3: `hsl(0, 0%, ${shadow}%)`
            };
        } else {
            // Light mode: Darker metallic steel effect
            const highlight = Math.max(0, Math.min(100, 60 + x * 0.3));
            const shadow = Math.max(0, Math.min(100, 15 - y * 0.2));
            return {
                color1: `hsl(0, 0%, ${highlight}%)`,
                color2: `hsl(220, 8%, ${40 + x * 0.2}%)`,
                color3: `hsl(0, 0%, ${shadow}%)`
            };
        }
    };

    const { color1, color2, color3 } = getMetallicGradient();
    
    // Calculate gradient direction to follow light source opposite to shadow
    const gradientAngle = 135 + cursorPosition.x * 0.5 - cursorPosition.y * 0.3;

    return (
        <div className='logo_img' style={{ width: '400px', height: 'auto' }}>
            <svg width="400px" height="auto" viewBox="0 0 2274 1758" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient 
                        id="metallicGradient" 
                        gradientTransform={`rotate(${gradientAngle})`}
                        gradientUnits="objectBoundingBox"
                    >
                        <stop offset="0%" stopColor={color3} />
                        <stop offset="30%" stopColor={color2} />
                        <stop offset="60%" stopColor={color1} />
                        <stop offset="80%" stopColor={color2} />
                        <stop offset="100%" stopColor={color3} />
                    </linearGradient>
                    
                    {/* Additional metallic sheen effect */}
                    <linearGradient 
                        id="metallicSheen" 
                        gradientTransform={`rotate(${gradientAngle + 45})`}
                        gradientUnits="objectBoundingBox"
                    >
                        <stop offset="0%" stopColor="transparent" />
                        <stop offset="45%" stopColor="transparent" />
                        <stop offset="50%" stopColor={isDarkMode ? "rgba(255,255,255,0.15)" : "rgba(255,255,255,0.25)"} />
                        <stop offset="55%" stopColor="transparent" />
                        <stop offset="100%" stopColor="transparent" />
                    </linearGradient>
                </defs>
                
                {/* Base metallic layer */}
                <path d="M137.727 727.563 96.405 847.811C89.582 867.667 70.902 881 49.905 881 16.15 881-7.568 847.762 3.41 815.84L272.39 33.76C279.335 13.565 298.344.01 319.702.023l721.638.45c25.01.016 46.16 18.512 49.51 43.299l.48 3.527c4.06 30.004-19.27 56.702-49.55 56.702H387.7c-21.357 0-40.357 13.565-47.291 33.766l-97.832 284.987a50 50 0 0 0 .008 32.492l198.126 576.225c15.47 44.99 79.101 44.99 94.567-.01l29.119-84.706c11.158-32.46-12.96-66.254-47.284-66.254H483.21c-21.362 0-40.365-13.571-47.296-33.778l-1.2-3.5C423.582 810.768 447.699 777 482.009 777h104.838c21.335 0 40.319-13.537 47.271-33.707l93.454-271.136c6.838-19.841 25.513-33.157 46.5-33.157 33.768 0 57.493 33.249 46.51 65.181L551.604 1286.26c-6.943 20.19-25.935 33.74-47.282 33.74h-32.641c-21.348 0-40.341-13.55-47.283-33.74L232.296 727.555c-15.47-44.994-79.106-44.988-94.569.008" fill="url(#metallicGradient)"/>
                <path d="M906.594 687.164 700.41 1286.81c-6.827 19.86-25.506 33.19-46.502 33.19-33.759 0-57.479-33.24-46.502-65.16L813.59 655.185C820.417 635.33 839.096 622 860.092 622c33.759 0 57.479 33.239 46.502 65.164m62.817-182.907-10.96 31.663c-6.854 19.8-25.504 33.08-46.457 33.08-33.78 0-57.497-33.284-46.467-65.213l10.939-31.67C883.313 452.298 901.975 439 922.944 439c33.801 0 57.524 33.316 46.467 65.257m18.858 366.961L845.408 1286.81c-6.825 19.86-25.505 33.19-46.5 33.19-33.758 0-57.476-33.24-46.497-65.16L1021.4 472.739c6.94-20.187 25.93-33.739 47.28-33.739h23.88c25.34 0 46.68 18.964 49.65 44.134l46.58 394.261c6.24 52.8 79.66 60.667 96.94 10.387l142.86-415.596c6.83-19.855 25.51-33.186 46.5-33.186 33.76 0 57.48 33.239 46.5 65.162L1252.6 1286.26c-6.94 20.19-25.93 33.74-47.28 33.74h-23.88c-25.34 0-46.68-18.96-49.65-44.13l-46.58-394.265c-6.24-52.8-79.66-60.667-96.941-10.387m420.681 384.012L1398 1286.9c-6.85 19.81-25.51 33.1-46.47 33.1-33.79 0-57.51-33.3-46.47-65.24l10.95-31.66c6.85-19.81 25.51-33.1 46.47-33.1 33.79 0 57.51 33.3 46.47 65.23m258.14-751.066-206.18 599.646c-6.83 19.86-25.51 33.19-46.5 33.19-33.76 0-57.48-33.24-46.5-65.16l206.18-599.655c6.83-19.855 25.51-33.185 46.5-33.185 33.76 0 57.48 33.239 46.5 65.164" fill="url(#metallicGradient)"/>
                <path d="m1639.87 1015.69-93.54 270.99c-6.78 19.64-25.27 32.82-46.05 32.82-33.45 0-56.95-32.94-46.07-64.56l268.92-781.706c6.95-20.184 25.94-33.734 47.28-33.734h31.92c21.34 0 40.33 13.545 47.28 33.723l192.65 559.557c15.47 44.95 79.05 44.97 94.54.02l41.88-121.476c6.78-19.642 25.26-32.824 46.04-32.824 33.44 0 56.93 32.937 46.04 64.557l-269.15 781.233c-6.95 20.17-25.93 33.71-47.27 33.71h-720.28c-25.18 0-46.44-18.73-49.6-43.71l-.32-2.5c-3.79-29.87 19.49-56.29 49.6-56.29h653.04c21.37 0 40.37-13.58 47.3-33.79l97.85-285.47a49.96 49.96 0 0 0-.01-32.47l-198.14-576.253c-15.47-44.99-79.09-44.989-94.56.001l-29.13 84.725c-11.17 32.461 12.95 66.257 47.28 66.257h33.92c21.36 0 40.36 13.571 47.3 33.778l1.2 3.5c11.13 32.454-12.99 66.222-47.3 66.222h-105.35c-21.33 0-40.31 13.526-47.27 33.69" fill="url(#metallicGradient)"/>
                
                {/* Metallic sheen overlay */}
                <path d="M137.727 727.563 96.405 847.811C89.582 867.667 70.902 881 49.905 881 16.15 881-7.568 847.762 3.41 815.84L272.39 33.76C279.335 13.565 298.344.01 319.702.023l721.638.45c25.01.016 46.16 18.512 49.51 43.299l.48 3.527c4.06 30.004-19.27 56.702-49.55 56.702H387.7c-21.357 0-40.357 13.565-47.291 33.766l-97.832 284.987a50 50 0 0 0 .008 32.492l198.126 576.225c15.47 44.99 79.101 44.99 94.567-.01l29.119-84.706c11.158-32.46-12.96-66.254-47.284-66.254H483.21c-21.362 0-40.365-13.571-47.296-33.778l-1.2-3.5C423.582 810.768 447.699 777 482.009 777h104.838c21.335 0 40.319-13.537 47.271-33.707l93.454-271.136c6.838-19.841 25.513-33.157 46.5-33.157 33.768 0 57.493 33.249 46.51 65.181L551.604 1286.26c-6.943 20.19-25.935 33.74-47.282 33.74h-32.641c-21.348 0-40.341-13.55-47.283-33.74L232.296 727.555c-15.47-44.994-79.106-44.988-94.569.008" fill="url(#metallicSheen)"/>
                <path d="M906.594 687.164 700.41 1286.81c-6.827 19.86-25.506 33.19-46.502 33.19-33.759 0-57.479-33.24-46.502-65.16L813.59 655.185C820.417 635.33 839.096 622 860.092 622c33.759 0 57.479 33.239 46.502 65.164m62.817-182.907-10.96 31.663c-6.854 19.8-25.504 33.08-46.457 33.08-33.78 0-57.497-33.284-46.467-65.213l10.939-31.67C883.313 452.298 901.975 439 922.944 439c33.801 0 57.524 33.316 46.467 65.257m18.858 366.961L845.408 1286.81c-6.825 19.86-25.505 33.19-46.5 33.19-33.758 0-57.476-33.24-46.497-65.16L1021.4 472.739c6.94-20.187 25.93-33.739 47.28-33.739h23.88c25.34 0 46.68 18.964 49.65 44.134l46.58 394.261c6.24 52.8 79.66 60.667 96.94 10.387l142.86-415.596c6.83-19.855 25.51-33.186 46.5-33.186 33.76 0 57.48 33.239 46.5 65.162L1252.6 1286.26c-6.94 20.19-25.93 33.74-47.28 33.74h-23.88c-25.34 0-46.68-18.96-49.65-44.13l-46.58-394.265c-6.24-52.8-79.66-60.667-96.941-10.387m420.681 384.012L1398 1286.9c-6.85 19.81-25.51 33.1-46.47 33.1-33.79 0-57.51-33.3-46.47-65.24l10.95-31.66c6.85-19.81 25.51-33.1 46.47-33.1 33.79 0 57.51 33.3 46.47 65.23m258.14-751.066-206.18 599.646c-6.83 19.86-25.51 33.19-46.5 33.19-33.76 0-57.48-33.24-46.5-65.16l206.18-599.655c6.83-19.855 25.51-33.185 46.5-33.185 33.76 0 57.48 33.239 46.5 65.164" fill="url(#metallicSheen)"/>
                <path d="m1639.87 1015.69-93.54 270.99c-6.78 19.64-25.27 32.82-46.05 32.82-33.45 0-56.95-32.94-46.07-64.56l268.92-781.706c6.95-20.184 25.94-33.734 47.28-33.734h31.92c21.34 0 40.33 13.545 47.28 33.723l192.65 559.557c15.47 44.95 79.05 44.97 94.54.02l41.88-121.476c6.78-19.642 25.26-32.824 46.04-32.824 33.44 0 56.93 32.937 46.04 64.557l-269.15 781.233c-6.95 20.17-25.93 33.71-47.27 33.71h-720.28c-25.18 0-46.44-18.73-49.6-43.71l-.32-2.5c-3.79-29.87 19.49-56.29 49.6-56.29h653.04c21.37 0 40.37-13.58 47.3-33.79l97.85-285.47a49.96 49.96 0 0 0-.01-32.47l-198.14-576.253c-15.47-44.99-79.09-44.989-94.56.001l-29.13 84.725c-11.17 32.461 12.95 66.257 47.28 66.257h33.92c21.36 0 40.36 13.571 47.3 33.778l1.2 3.5c11.13 32.454-12.99 66.222-47.3 66.222h-105.35c-21.33 0-40.31 13.526-47.27 33.69" fill="url(#metallicSheen)"/>
            </svg>
        </div>
    );
};

export default Logo;
